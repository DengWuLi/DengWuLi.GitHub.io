---
title: 'BUPT JAVA: 对象序列化'
index_img: /img/BUPT.png
banner_img: /img/Java.png
date: 2023-04-24
tags:
  - Java
category:
  - BUPT_JAVA
---

# 对象序列化

## 题目描述: 
现有类 Person 和 Book, 其定义如下:

```java
import java.io.Serializable;
import java.time.LocalDate;

public class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
    private String gender;
    private LocalDate birthday;
    private String biography;

    public Person() {}

    public Person(String name, String gender, String biography, int year, int month, int day) {
        this.name = name;
        this.gender = gender;
        this.biography = biography;
        this.birthday = LocalDate.of(year, month, day);
    }

    public String getName() {return name;}

    public void setName(String name) {this.name = name;}

    public String getGender() {return gender;}

    public void setGender(String gender) {this.gender = gender;}

    public LocalDate getBirthday() {return birthday;}

    public void setBirthday(LocalDate birthday) {this.birthday = birthday;}

    public String getBiography() {return biography;}

    public void setBiography(String biography) {this.biography = biography;}

    @Override
    public String toString() {
        return "name: " + name + " , gender: " + gender + " , birthday: "
                + birthday + " , biography: " + biography;
    }
}
```

```java
import java.io.Serializable;

public class Book implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
    private Person author;
    private int price;

    public String getName() {return name;}

    public void setName(String name) {this.name = name;}

    public Person getAuthor() {return author;}

    public void setAuthor(Person author) {this.author = author;}

    public int getPrice() {return price;}

    public void setPrice(int price) {this.price = price;}

    public Book() {}

    public Book(String name, Person author, int price) {
        this.name = name;
        this.author = author;
        this.price = price;
    }

    @Override
    public String toString() {
        return "name: " + name + "\nauthor: " + author + "\nprice: " + price;
    }
}
```

有一段程序用 `ObjectOutputStream` 的 `writeObject()` 方法连续向文件 `dict.dic` 中写入了 5 个 Book 类型的对象. 现请你写一段程序将这 5 个对象读出来.
**注意: 你的程序中要把 Person 和 Book 类的定义复制过去.**

## 输入:
为一个整数, 只可能是 1, 2, 3, 4, 5 之一.

## 输出:
只有一行字符串, 为对应的文件名

## 输入样例:
```txt
1
```

## 输出样例:
```txt
name: Thinking in Java
author: name: Bruce Eckel , gender: male , birthday: 1957-07-08 , biography: Bruce Eckel is a computer programmer, author and consultant.
price: 75
```

## Java
```java
// 2023/04/24
// 对象序列化

import java.io.*;
import java.time.LocalDate;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        var in = new Scanner(System.in);
        var n = in.nextInt();
        var file = new ObjectInputStream(new FileInputStream("dict.dic"));
        var books = new Book[5];
        for (int i = 0; i < 5; i++)
            books[i] = (Book) file.readObject();
        System.out.println(books[n - 1]);
    }
}

class Person implements Serializable {
    @Serial
    private static final long serialVersionUID = 1L;
    private String name;
    private String gender;
    private LocalDate birthday;
    private String biography;

    public Person() {}

    public Person(String name, String gender, String biography, int year, int month, int day) {
        this.name = name;
        this.gender = gender;
        this.biography = biography;
        this.birthday = LocalDate.of(year, month, day);
    }

    public String getName() {return name;}

    public void setName(String name) {this.name = name;}

    public String getGender() {return gender;}

    public void setGender(String gender) {this.gender = gender;}

    public LocalDate getBirthday() {return birthday;}

    public void setBirthday(LocalDate birthday) {this.birthday = birthday;}

    public String getBiography() {return biography;}

    public void setBiography(String biography) {this.biography = biography;}

    @Override
    public String toString() {
        return "name: " + name + " , gender: " + gender + " , birthday: "
                + birthday + " , biography: " + biography;
    }
}

class Book implements Serializable {
    @Serial
    private static final long serialVersionUID = 1L;
    private String name;
    private Person author;
    private int price;

    public String getName() {return name;}

    public void setName(String name) {this.name = name;}

    public Person getAuthor() {return author;}

    public void setAuthor(Person author) {this.author = author;}

    public int getPrice() {return price;}

    public void setPrice(int price) {this.price = price;}

    public Book() {}

    public Book(String name, Person author, int price) {
        this.name = name;
        this.author = author;
        this.price = price;
    }

    @Override
    public String toString() {
        return "name: " + name + "\nauthor: " + author + "\nprice: " + price;
    }
}
```

<pre class="note note-info">
<strong>2023-04-24</strong> 
<strong>IP属地: 北京</strong>
</pre>